<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Maheen Rizwan - Software Developer and Data Scientist Portfolio" />
<title>Maheen Rizwan - Portfolio</title>
<style>
  :root {
    --primary-color: #0f9d58;
    --secondary-color: #007bff;
    --background-color: #0c0050;
    --card-bg: #1e1e1e;
    --text-color: #f0f0f0;
    --accent-color: #ffa726;
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    line-height: 1.6;
    scroll-behavior: smooth;
  }
  
  /* ... (keep all your existing CSS the same until .skill-bar) ... */

  /* Modified skill bar styles */
  .skill-bar {
    background: #733636;
    border-radius: 10px;
    height: 14px;
    margin: 0.5rem 0 1rem;
    overflow: hidden;
    position: relative;
    width: 100%;
  }
  .skill-bar-fill {
    height: 100%;
    width: 0; /* Start at 0 */
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 10px;
    position: relative;
    transition: width 1.5s ease-in-out; /* Smooth transition */
  }
  .skill-bar-fill::after {
    content: attr(data-width);
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 10px;
    color: white;
    font-weight: bold;
  }

  /* ... (keep all remaining existing CSS the same) ... */
</style>
</head>
<body>

<!-- Your existing HTML remains exactly the same until the script section -->

<script>
  // Improved version with debug checks
  document.addEventListener('DOMContentLoaded', function() {
    // Mobile menu toggle
    const hamburger = document.querySelector('.hamburger');
    const nav = document.querySelector('nav');
    
    if (hamburger && nav) {
      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        nav.classList.toggle('open');
      });

      document.querySelectorAll('nav a').forEach(link => {
        link.addEventListener('click', () => {
          hamburger.classList.remove('active');
          nav.classList.remove('open');
        });
      });
    }

    // Header scroll effect
    const header = document.getElementById('header');
    if (header) {
      window.addEventListener('scroll', () => {
        header.classList.toggle('scrolled', window.scrollY > 50);
      });
    }

    // Active nav link
    const sections = document.querySelectorAll('main section');
    const navLinks = document.querySelectorAll('nav a');
    
    function changeActiveLink() {
      let index = 0;
      let minDistance = Infinity;
      
      sections.forEach((section, i) => {
        const sectionTop = section.offsetTop - 100;
        const scrollPosition = window.scrollY;
        
        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + section.offsetHeight) {
          index = i;
          return;
        }
        
        const distance = Math.abs(scrollPosition - sectionTop);
        if (distance < minDistance) {
          minDistance = distance;
          index = i;
        }
      });
      
      navLinks.forEach(link => link.classList.remove('active'));
      navLinks[index]?.classList.add('active');
    }

    // Skill bar animation - MODIFIED VERSION
    const skillFills = document.querySelectorAll(".skill-bar-fill");
    
    function animateSkills() {
      const triggerBottom = window.innerHeight * 0.8; // More sensitive trigger
      
      skillFills.forEach(skill => {
        const skillTop = skill.getBoundingClientRect().top;
        
        if (skillTop < triggerBottom) {
          const widthValue = skill.getAttribute('data-width');
          skill.style.width = widthValue;
        }
      });
    }

    // Initialize animations
    function initAnimations() {
      // Run once on load
      animateSkills();
      changeActiveLink();
      
      // Set up event listeners
      window.addEventListener('scroll', () => {
        changeActiveLink();
        animateSkills();
      });

      // Debug check
      console.log('Initialized skill bars:', skillFills.length);
      skillFills.forEach(skill => {
        console.log(`Skill: ${skill.parentNode.querySelector('h4').textContent.trim()}, Width: ${skill.getAttribute('data-width')}`);
      });
    }

    // Back to top button
    const backToTopButton = document.getElementById('backToTop');
    if (backToTopButton) {
      window.addEventListener('scroll', () => {
        backToTopButton.classList.toggle('visible', window.scrollY > 300);
      });
      
      backToTopButton.addEventListener('click', (e) => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    // Fade in animation
    const fadeElements = document.querySelectorAll('.fade-in');
    function checkFade() {
      const triggerBottom = window.innerHeight * 0.8;
      fadeElements.forEach(el => {
        const elTop = el.getBoundingClientRect().top;
        if (elTop < triggerBottom) {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }
      });
    }

    // Form handling
    const contactForm = document.getElementById('contactForm');
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (validateForm()) {
          alert('Thank you for your message! I will get back to you soon.');
          contactForm.reset();
        }
      });
    }

    function validateForm() {
      // Your existing validation logic
      return true;
    }

    // Start everything
    initAnimations();
    checkFade();
    window.addEventListener('scroll', checkFade);
  });
</script>
</body>
</html>
